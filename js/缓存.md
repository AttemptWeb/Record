# 浏览器缓存

**强制缓存 Expires和Cache-Control**

**对比缓存 由服务器判定是否从缓存中获取资源**

## 强制缓存

### HTTP/1.0 Expires 缓存

最早使用的是Expires字段，该字段表示缓存到期时间，即有效时间+当时服务器的时间，然后将这个时间设置在header中返回给服务器

在响应消息头中，设置这个字段之后，就可以告诉浏览器，在未过期之前不需要再次请求。

但是，这个字段设置时有缺点：

由于是绝对时间，用户可能会将客户端本地的时间进行修改，而导致浏览器判断缓存失效，重新请求该资源，同时，还导致客户端与服务端的时间不一致，致使缓存失效。

### HTTP/1.1 Cache-Control

已知Expires的缺点之后，在HTTP/1.1中，增加了一个字段Cache-Control，该字段表示资源缓存的最大有效时间，在该时间内，客户端不需要向服务器发送请求。

这两者的区别就是前者是绝对时间，而后者是相对时间
```
Cache-Control: max-age=2592000
```

下面列举一下Cache-Control的字段可以带的值：

    max-age：即最大有效时间，在上面的例子中我们可以看到
    
    no-cache：表示没有缓存，即告诉浏览器该资源并没有设置缓存
    
    s-maxage：同max-age，但是仅用于共享缓存，如CDN缓存
    
    public：多用户共享缓存，默认设置
    
    private：不能够多用户共享，HTTP认证之后，字段会自动转换成private。

总结一下，自从http1.1开始，Expires逐渐被Cache-Control取代。Cache-Control是一个相对时间，即使客户端时间发生改变，相对时间也不会随之改变，这样可以保持服务器和客户端的时间一致性。而且Cache-Control的可配置性比较强大。

## 对比缓存









